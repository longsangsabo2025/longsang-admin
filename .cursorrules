# üéØ LONGSANG ADMIN - AI CODING GUIDELINES

> ƒê√¢y l√† file `.cursorrules` - Cursor AI s·∫Ω t·ª± ƒë·ªông ƒë·ªçc v√† tu√¢n theo

## üîë ENVIRONMENT VARIABLES

**File `.env` c√≥ s·∫µn t·∫°i root folder v·ªõi ƒë·∫ßy ƒë·ªß API keys:**
- Supabase: `VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`, `SUPABASE_SERVICE_ROLE_KEY`
- Facebook: Nhi·ªÅu pages v·ªõi `FACEBOOK_PAGE_*_ID` v√† `FACEBOOK_PAGE_*_TOKEN`
- Instagram: `INSTAGRAM_*_ID` 
- YouTube: `YOUTUBE_CLIENT_ID`, `YOUTUBE_CLIENT_SECRET`, `YOUTUBE_REFRESH_TOKEN`
- Google Drive: `GOOGLE_DRIVE_REFRESH_TOKEN`
- LinkedIn: `LINKEDIN_*`
- Threads: `THREADS_*`

**C√°ch d√πng:**
- Backend: `process.env.KEY_NAME`
- Frontend: `import.meta.env.VITE_KEY_NAME` (ch·ªâ VITE_ prefix)

**Xem chi ti·∫øt:** `_DOCS/ENV_KEYS_REFERENCE.md`

## üèóÔ∏è PROJECT STRUCTURE

```
longsang-admin/
‚îú‚îÄ‚îÄ api/                    # Express.js backend
‚îÇ   ‚îú‚îÄ‚îÄ server.js          # Main server (port 3001)
‚îÇ   ‚îú‚îÄ‚îÄ routes/            # API route handlers
‚îÇ   ‚îú‚îÄ‚îÄ google-drive.js    # Google Drive integration
‚îÇ   ‚îî‚îÄ‚îÄ backup.js          # Backup functionality
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/           # shadcn/ui components (DO NOT MODIFY)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/        # Admin-specific components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai/           # AI-related components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ media/        # Media/file components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ social/       # Social media components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seo/          # SEO components
‚îÇ   ‚îú‚îÄ‚îÄ pages/            # Page components
‚îÇ   ‚îú‚îÄ‚îÄ hooks/            # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ lib/              # Utilities
‚îÇ   ‚îî‚îÄ‚îÄ App.tsx           # Router configuration
‚îî‚îÄ‚îÄ .env                  # Environment variables
```

## üìê CODING STANDARDS

### TypeScript
```typescript
// ‚úÖ DO: Use proper types
interface Props {
  readonly projectId: string;
  readonly onSave?: (data: ProjectData) => void;
}

// ‚úÖ DO: Use Readonly for props
function Component({ projectId }: Readonly<Props>) {}

// ‚ùå DON'T: Use any
const data: any = {};
```

### React Components
```typescript
// ‚úÖ DO: Functional components with hooks
export function MyComponent() {
  const [state, setState] = useState<string>("");
  const { toast } = useToast();
  
  return <div>...</div>;
}

// ‚úÖ DO: Export barrel files
// components/media/index.ts
export { MediaLibrary } from "./MediaLibrary";
export { ImagePicker } from "./ImagePicker";
```

### API Routes
```javascript
// ‚úÖ DO: Proper error handling
router.post('/endpoint', async (req, res) => {
  try {
    const result = await doSomething();
    res.json({ success: true, data: result });
  } catch (error) {
    console.error('Error:', error);
    res.status(500).json({ error: error.message });
  }
});
```

### UI Components
```typescript
// ‚úÖ DO: Use shadcn/ui
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { useToast } from "@/hooks/use-toast";

// ‚úÖ DO: Use lucide-react icons
import { Loader2, Send, Check } from "lucide-react";
```

## üé® UI PATTERNS

### Loading States
```typescript
{loading ? (
  <Loader2 className="h-4 w-4 animate-spin" />
) : (
  <Send className="h-4 w-4" />
)}
```

### Toast Notifications
```typescript
const { toast } = useToast();

// Success
toast({ title: "‚úÖ Th√†nh c√¥ng", description: "ƒê√£ l∆∞u d·ªØ li·ªáu" });

// Error
toast({ 
  title: "‚ùå L·ªói", 
  description: "Kh√¥ng th·ªÉ th·ª±c hi·ªán", 
  variant: "destructive" 
});
```

### Card Layout
```typescript
<Card>
  <CardHeader>
    <CardTitle className="flex items-center gap-2">
      <Icon className="h-5 w-5" />
      Ti√™u ƒë·ªÅ
    </CardTitle>
    <CardDescription>M√¥ t·∫£</CardDescription>
  </CardHeader>
  <CardContent>
    {/* Content */}
  </CardContent>
</Card>
```

## üîå API INTEGRATION

### Frontend ‚Üí Backend
```typescript
// Always use relative path (Vite proxy handles it)
const response = await fetch('/api/endpoint', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(data)
});

if (!response.ok) throw new Error('API Error');
const result = await response.json();
```

### Environment Variables
```javascript
// Backend: process.env.VAR_NAME
const apiKey = process.env.OPENAI_API_KEY;

// Frontend: import.meta.env.VITE_VAR_NAME
const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
```

## üöÄ ADDING NEW FEATURES

### 1. New Page
```bash
1. Create: src/pages/AdminNewFeature.tsx
2. Add route: src/App.tsx
3. Add menu: src/components/admin/AdminLayout.tsx
```

### 2. New API Endpoint
```bash
1. Create: api/routes/new-feature.js
2. Register: api/server.js
```

### 3. New Component
```bash
1. Create: src/components/[category]/NewComponent.tsx
2. Export: src/components/[category]/index.ts (if exists)
```

## üáªüá≥ VIETNAMESE UI

- All user-facing text MUST be in Vietnamese
- Use emoji for visual clarity: ‚úÖ ‚ùå üîÑ ‚ö†Ô∏è üíæ ü§ñ
- Button labels: "L∆∞u", "H·ªßy", "T·∫°o m·ªõi", "X√≥a", "S·ª≠a"
- Status: "ƒêang t·∫£i...", "Th√†nh c√¥ng", "L·ªói"

## ‚ö° PERFORMANCE

- Use `useCallback` for functions passed to children
- Use `useMemo` for expensive computations
- Lazy load pages: `const Page = lazy(() => import('./Page'))`
- Don't over-optimize - this is local single-user app

## üéØ FOCUS AREAS

This app is for PERSONAL PRODUCTIVITY:
1. **Speed** - Fast to use, fast to develop
2. **Automation** - AI does the heavy lifting
3. **Simplicity** - No over-engineering
4. **Vietnamese** - Native language UI

## ‚ùå AVOID

- Complex authentication systems
- Testing frameworks
- CI/CD pipelines
- Production deployment configs
- Over-abstraction
- Premature optimization
